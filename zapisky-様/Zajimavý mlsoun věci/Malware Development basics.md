# Teorie 
C2 -> command and control

```ad-note
title: Quotes
color: 255,0,0

mallware je cool, ale používat ho pro kriminální účely už ne

---
když to budete dělat pro nějaký nepěkný účely tak si dejte pozor, aby vás nechytili

---
```

## Malware
- C2
- Keyloggers
- Ransomware
- Bootkity 
- Rootkity
- ...

---

Vývoj "for fun" vs "for job"

#### Core features v0.1
komunikace s C2
chopnost spouštění příkazů
schopnost persistence

##### Programovací jazyky
- Assembler = největší kontrola nad programem, velmi těžké
- .Net usnadňuje memory management a knihovny ale potřebujeme instalaci .Net na cílovém počítači
- Java nemá nic
- Go má "cross platform" kompilaci
- C nemá "classes" ale není memory safe, co potřebuji v něm napíšu a snadná interakce s Win API
- Cpp je podobné C ale je object oriented, kompilace do .exe, cílíme pouze na Win, snadnější rozšíření preferujeme jazyk 

Malware spuštěn -> nahlásí se -> získání persistence

### Nepodceňovat dázi návrhu
funkcionalitu atd.


---

 Komentovat kód + nepojmenovat proměnou "MlsounKterejDrziPocetMlsounu"

---

## Nahlášení C2
Raw sockety -> nejlepší pro kontrolu nad komunikací ale je težký napsat
HTTP -> Knihovny což je plus, přicházíme o kontrolu a nemá šifrování
HTTPS -> stejně jako HTTP ale máme šifrování

## Persistence 
Do startup folderu -> snadná a lehce detekovatelná, chytají ji AV
WMI event subscription -> Nová a ne tak detekovaná technika, není stabilní 100%, těžká
Scheduled tasks -> spouští programy v intervalech
 

---


Pro dnešní vývoj -> Raw sockety a scheduled tasks


---

## Pseudokód
funkce main -> estabilishpersistance -> prijmi komand, vykonej a posli vysledek

Serverovou část nahradíme Netcatem

---








